(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[300],{8188:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/category/[id]",function(){return s(862)}])},862:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return v}});var r=s(5893),n=s(5945),i=s(7e3),o=s(8228),a=s(4579),l=s(1163),c=s(549),u=s(7669),d=s(6819),h=s(1664),p=s.n(h);let f=t=>{let{onDelete:e,todoItems:s}=t,n=(0,u.h)({queries:s.map(t=>({queryKey:["getTodo",t],queryFn:()=>(0,a.dC)(t.toString())}))}),i=!n.some(t=>t.isLoading),o=t=>{e(t)};return(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"table w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{}),(0,r.jsx)("th",{children:"Title"}),(0,r.jsx)("th",{children:"Description"}),(0,r.jsx)("th",{children:"Deadline"})]})}),(0,r.jsx)("tbody",{children:i?n.map((t,e)=>{let s=t.data;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:s.id}),(0,r.jsx)("td",{children:(0,r.jsx)(p(),{href:{pathname:"../todo/"+s.id},children:s.title})}),(0,r.jsx)("td",{children:s.description}),(0,r.jsx)("td",{children:(0,r.jsx)(d.Z,{deadline:s.deadline})}),(0,r.jsx)("td",{children:(0,r.jsx)(p(),{href:{pathname:"../todo/edit",query:{id:s.id}},children:"Edit"})}),(0,r.jsx)("td",{children:(0,r.jsx)("button",{type:"button",onClick:()=>o(s),children:"Delete"})})]},e)}):(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"..."}),(0,r.jsx)("td",{children:"..."}),(0,r.jsx)("td",{children:"..."}),(0,r.jsx)("td",{children:"..."}),(0,r.jsx)("td",{children:"..."})]})})]})})};var x=s(7692),m=s(7294);let y=()=>{var t;let e=(0,n.NL)(),s=(0,l.useRouter)(),[u,d]=(0,m.useState)(),h="string"==typeof(null===(t=s.query)||void 0===t?void 0:t.id)?s.query.id:"",{isLoading:y,isError:v,data:b,isSuccess:j}=(0,i.a)({queryKey:["getCategory",h],queryFn:()=>(0,a.n3)(h)});(0,m.useEffect)(()=>{j&&b&&d(b)},[j,b,d]);let g=(0,o.D)({mutationFn:t=>(0,a.aS)(t),onSuccess(t){e.invalidateQueries({queryKey:["getTodo",null==t?void 0:t.id]})}}),O=(0,o.D)({mutationFn:t=>(0,a.ht)(t),onSuccess(){e.invalidateQueries({queryKey:["getCategory",h]})}}),R=t=>{g.mutate(t.id),u&&(-1!==u.todoItems.indexOf(+t.id)&&(u.todoItems=u.todoItems.filter(e=>e!==+t.id)),O.mutate(u))};return(0,r.jsx)(c.Z,{siteTitle:y?"Loading...":null==u?void 0:u.title,siteDescription:y?"Loading...":null==u?void 0:u.description,children:(0,r.jsx)("div",{className:"hero",children:(0,r.jsx)("div",{className:"hero-content",children:(0,r.jsx)("div",{className:"flex flex-col justify-center",children:y?(0,r.jsx)(x.Z,{title:"Loading Category...",type:"info"}):(0,r.jsx)(r.Fragment,{children:v?(0,r.jsx)(x.Z,{title:"An Error occurred",type:"error"}):(0,r.jsx)(r.Fragment,{children:j&&u&&(null==u?void 0:u.todoItems.length)>0?(0,r.jsx)(f,{todoItems:null==u?void 0:u.todoItems,onDelete:R}):(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("p",{className:"py-5",children:"No todos add some"}),(0,r.jsx)(p(),{href:{pathname:"../todo/add"},className:"btn btn-primary",children:"Add Todo"})]})})})})})})})};var v=y},4579:function(t,e,s){"use strict";s.d(e,{CP:function(){return a},LC:function(){return h},aS:function(){return m},bm:function(){return x},dC:function(){return p},ht:function(){return u},i8:function(){return c},n3:function(){return l},rk:function(){return f},uu:function(){return d}});var r=s(196);let n="https://636ba3e07f47ef51e13633ee.mockapi.io/api/v1/",i="category",o="todo",a=async()=>{try{let t=await r.ZP.get(n+i);return t.data}catch(e){console.log(e)}},l=async t=>{try{let e=await r.ZP.get("".concat(n).concat(i,"/").concat(t));return e.data}catch(s){console.log(s)}},c=async t=>{try{let e=await r.ZP.post("".concat(n).concat(i),t);return e.data}catch(s){console.log(s)}},u=async t=>{let e={title:t.title,description:t.description,todoItems:t.todoItems};try{let s=await r.ZP.put("".concat(n).concat(i,"/").concat(t.id),e);return s.data}catch(o){console.log(o)}},d=async t=>{try{let e=await r.ZP.delete("".concat(n).concat(i,"/").concat(t));return e.data}catch(s){console.log(s)}},h=async()=>{try{let t=await r.ZP.get(n+o);return t.data}catch(e){console.log(e)}},p=async t=>{try{let e=await r.ZP.get("".concat(n).concat(o,"/").concat(t));return e.data}catch(s){console.log(s)}},f=async t=>{let e={title:t.title,description:t.description,deadline:t.deadline,done:t.done};try{let s=await r.ZP.post("".concat(n).concat(o),e);return s.data}catch(i){console.log(i)}},x=async t=>{let e={createdAt:t.createdAt,title:t.title,description:t.description,deadline:t.deadline,done:t.done};try{let s=await r.ZP.put("".concat(n).concat(o,"/").concat(t.id),e);return s.data}catch(i){console.log(i)}},m=async t=>{try{let e=await r.ZP.delete("".concat(n).concat(o,"/").concat(t));return e.data}catch(s){console.log(s)}}},6819:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});var r=s(5893),n=s(7294);let i=t=>[Math.floor(t/864e5),Math.floor(t%864e5/36e5),Math.floor(t%36e5/6e4),Math.floor(t%6e4/1e3)],o=t=>{let{deadline:e,className:s}=t,o=new Date(e).getTime(),[a,l]=(0,n.useState)(o-new Date().getTime());(0,n.useEffect)(()=>{let t=setInterval(()=>{l(o-new Date().getTime())},1e3);return()=>clearInterval(t)},[o]);let[c,u,d,h]=i(a);return(0,r.jsxs)("div",{className:"flex gap-5 ".concat(s),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"countdown font-mono text-2xl",children:(0,r.jsx)("span",{style:{"--value":c},children:c})}),"days"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"countdown font-mono text-2xl",children:(0,r.jsx)("span",{style:{"--value":u}})}),"hours"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"countdown font-mono text-2xl",children:(0,r.jsx)("span",{style:{"--value":d}})}),"min"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"countdown font-mono text-2xl",children:(0,r.jsx)("span",{style:{"--value":h}})}),"sec"]})]})};var a=o},7692:function(t,e,s){"use strict";var r=s(5893);let n=t=>{let{title:e,type:s}=t;return(0,r.jsx)("div",{className:"m-10",children:(0,r.jsx)("p",{className:"justify-center text-white shadow-lg alert alert-".concat(s),children:e})})};e.Z=n},549:function(t,e,s){"use strict";s.d(e,{Z:function(){return c}});var r=s(5893),n=s(9008),i=s.n(n);let o=t=>{let{siteTitle:e,siteDescription:s,favicon:n}=t;return(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:e}),(0,r.jsx)("meta",{name:"description",content:s}),(0,r.jsx)("link",{rel:"icon",href:n||"/to-do-list.ico"})]})},a=t=>{let{id:e,title:s,description:n}=t;return(0,r.jsxs)("section",{id:e,className:"text-center py-10 px-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mt-0 mb-6",children:s}),(0,r.jsx)("h3",{className:"text-1xl font-bold mb-8",children:n}),(0,r.jsx)("div",{className:"divider"})]})},l=t=>{let{siteTitle:e,siteDescription:s,type:n,children:i}=t,l=e||"ToDo",c=s||"Stop forgetting what to do next use this app.";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o,{siteTitle:l+" - AMCEF",siteDescription:c}),(0,r.jsxs)("main",{className:"min-h-screen bg-base-200",children:["home"!==n&&(0,r.jsx)(a,{title:l,description:c}),(0,r.jsx)("section",{className:"p-10",children:i})]})]})};var c=l},1163:function(t,e,s){t.exports=s(880)},8228:function(t,e,s){"use strict";s.d(e,{D:function(){return h}});var r=s(7294),n=s(464),i=s(2161),o=s(9886),a=s(81),l=s(3989);class c extends l.l{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.client.defaultMutationOptions(t),(0,i.VS)(e,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){if(!this.listeners.length){var t;null==(t=this.currentMutation)||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();let e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let t=this.currentMutation?this.currentMutation.state:(0,o.R)(),e={...t,isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){a.V.batch(()=>{if(this.mutateOptions){var e,s,r,n,i,o,a,l;t.onSuccess?(null==(e=(s=this.mutateOptions).onSuccess)||e.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(n=this.mutateOptions).onSettled)||r.call(n,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):t.onError&&(null==(i=(o=this.mutateOptions).onError)||i.call(o,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(a=(l=this.mutateOptions).onSettled)||a.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}t.listeners&&this.listeners.forEach(t=>{t(this.currentResult)})})}}var u=s(5945),d=s(4798);function h(t,e,s){let o=(0,i.lV)(t,e,s),l=(0,u.NL)({context:o.context}),[h]=r.useState(()=>new c(l,o));r.useEffect(()=>{h.setOptions(o)},[h,o]);let f=(0,n.$)(r.useCallback(t=>h.subscribe(a.V.batchCalls(t)),[h]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),x=r.useCallback((t,e)=>{h.mutate(t,e).catch(p)},[h]);if(f.error&&(0,d.L)(h.options.useErrorBoundary,[f.error]))throw f.error;return{...f,mutate:x,mutateAsync:f.mutate}}function p(){}},7669:function(t,e,s){"use strict";s.d(e,{h:function(){return f}});var r=s(7294),n=s(464),i=s(2161),o=s(81),a=s(2924),l=s(3989);class c extends l.l{constructor(t,e){super(),this.client=t,this.queries=[],this.result=[],this.observers=[],this.observersMap={},e&&this.setQueries(e)}onSubscribe(){1===this.listeners.length&&this.observers.forEach(t=>{t.subscribe(e=>{this.onUpdate(t,e)})})}onUnsubscribe(){this.listeners.length||this.destroy()}destroy(){this.listeners=[],this.observers.forEach(t=>{t.destroy()})}setQueries(t,e){this.queries=t,o.V.batch(()=>{let t=this.observers,s=this.findMatchingObservers(this.queries);s.forEach(t=>t.observer.setOptions(t.defaultedQueryOptions,e));let r=s.map(t=>t.observer),n=Object.fromEntries(r.map(t=>[t.options.queryHash,t])),o=r.map(t=>t.getCurrentResult()),a=r.some((e,s)=>e!==t[s]);(t.length!==r.length||a)&&(this.observers=r,this.observersMap=n,this.result=o,this.hasListeners()&&((0,i.e5)(t,r).forEach(t=>{t.destroy()}),(0,i.e5)(r,t).forEach(t=>{t.subscribe(e=>{this.onUpdate(t,e)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(t=>t.getCurrentQuery())}getOptimisticResult(t){return this.findMatchingObservers(t).map(t=>t.observer.getOptimisticResult(t.defaultedQueryOptions))}findMatchingObservers(t){let e=this.observers,s=t.map(t=>this.client.defaultQueryOptions(t)),r=s.flatMap(t=>{let s=e.find(e=>e.options.queryHash===t.queryHash);return null!=s?[{defaultedQueryOptions:t,observer:s}]:[]}),n=r.map(t=>t.defaultedQueryOptions.queryHash),i=s.filter(t=>!n.includes(t.queryHash)),o=e.filter(t=>!r.some(e=>e.observer===t)),l=t=>{let e=this.client.defaultQueryOptions(t),s=this.observersMap[e.queryHash];return null!=s?s:new a.z(this.client,e)},c=i.map((t,e)=>{if(t.keepPreviousData){let s=o[e];if(void 0!==s)return{defaultedQueryOptions:t,observer:s}}return{defaultedQueryOptions:t,observer:l(t)}}),u=(t,e)=>s.indexOf(t.defaultedQueryOptions)-s.indexOf(e.defaultedQueryOptions);return r.concat(c).sort(u)}onUpdate(t,e){let s=this.observers.indexOf(t);-1!==s&&(this.result=(0,i.Rc)(this.result,s,e),this.notify())}notify(){o.V.batch(()=>{this.listeners.forEach(t=>{t(this.result)})})}}var u=s(5945),d=s(7122),h=s(1784),p=s(1670);function f({queries:t,context:e}){let s=(0,u.NL)({context:e}),i=(0,d.S)(),a=r.useMemo(()=>t.map(t=>{let e=s.defaultQueryOptions(t);return e._optimisticResults=i?"isRestoring":"optimistic",e}),[t,s,i]),[l]=r.useState(()=>new c(s,a)),f=l.getOptimisticResult(a);(0,n.$)(r.useCallback(t=>i?()=>void 0:l.subscribe(o.V.batchCalls(t)),[l,i]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),r.useEffect(()=>{l.setQueries(a,{listeners:!1})},[a,l]);let x=(0,h._)();a.forEach(t=>{(0,p.pf)(t,x)}),(0,p.JN)(x);let m=f.find((t,e)=>{var s,r;return(0,p.KJ)({result:t,errorResetBoundary:x,useErrorBoundary:null!=(s=null==(r=a[e])?void 0:r.useErrorBoundary)&&s,query:l.getQueries()[e]})});if(null!=m&&m.error)throw m.error;return f}}},function(t){t.O(0,[202,0,774,888,179],function(){return t(t.s=8188)}),_N_E=t.O()}]);