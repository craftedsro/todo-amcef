(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{908:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/todo/edit",function(){return i(305)}])},305:function(e,t,i){"use strict";i.r(t);var o=i(5893),d=i(5945),n=i(7e3),s=i(8228),r=i(4579),u=i(1163),c=i(549),l=i(7294),a=i(7692),m=i(3329);let f=()=>{var e;let t=(0,d.NL)(),i=(0,u.useRouter)(),[f,p]=(0,l.useState)(void 0),y="string"==typeof(null===(e=i.query)||void 0===e?void 0:e.id)?i.query.id:"",{isLoading:g,isError:x,isSuccess:h,data:v}=(0,n.a)({queryKey:["getTodo",y],queryFn:()=>(0,r.dC)(y)});(0,l.useEffect)(()=>{h&&v!==f&&p(v)},[h,v,f,p]);let _=(0,s.D)({mutationFn:e=>(0,r.bm)(e),onSuccess(){t.invalidateQueries({queryKey:["getTodo",y]})}}),E=(0,s.D)({mutationFn:e=>(0,r.ht)(e),onSuccess(){t.invalidateQueries({queryKey:["getCategories"]})}}),j=e=>{if(void 0!==v){let t={id:null==v?void 0:v.id,createdAt:v.createdAt,title:e.title,description:e.description,deadline:e.deadline,done:e.done};_.mutate(t),e.categories&&e.categories.map(i=>{i!==e.selectedCategory?-1!==i.todoItems.indexOf(+t.id)&&(i.todoItems=i.todoItems.filter(e=>e!==+t.id)):-1===i.todoItems.indexOf(+t.id)&&i.todoItems.push(+t.id),E.mutate(i)})}};return(0,o.jsx)(c.Z,{siteTitle:g?"Loading...":"Edit Todo",siteDescription:g?"Loading...":"Edit data and click submit.",children:(0,o.jsx)("div",{className:"hero",children:(0,o.jsx)("div",{className:"hero-content flex-col",children:_.isLoading?(0,o.jsx)(a.Z,{title:"Editing Todo...",type:"info"}):(0,o.jsxs)(o.Fragment,{children:[!f||_.isError||x?(0,o.jsx)(a.Z,{title:"An Error occurred",type:"error"}):null,_.isSuccess?(0,o.jsx)(a.Z,{title:"Todo edited!",type:"success"}):null,(0,o.jsx)("div",{className:"mt-5 md:col-span-1 md:mt-0",children:g||g?(0,o.jsx)(a.Z,{title:"Loading Todo...",type:"info"}):(0,o.jsx)(m.Z,{...f,onSubmit:j})})]})})})})};t.default=f},1163:function(e,t,i){e.exports=i(880)}},function(e){e.O(0,[202,0,964,312,193,774,888,179],function(){return e(e.s=908)}),_N_E=e.O()}]);