"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[669],{2924:function(e,t,s){s.d(t,{z:function(){return l}});var r=s(2161),i=s(81),n=s(5761),u=s(3989),o=s(2379);class l extends u.l{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.length&&(this.currentQuery.addObserver(this),h(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return a(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return a(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){let s=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),(0,r.VS)(s,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=s.queryKey),this.updateQuery();let n=this.hasListeners();n&&c(this.currentQuery,i,this.options,s)&&this.executeFetch(),this.updateResult(t),n&&(this.currentQuery!==i||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&this.updateStaleTimeout();let u=this.computeRefetchInterval();n&&(this.currentQuery!==i||this.options.enabled!==s.enabled||u!==this.currentRefetchInterval)&&this.updateRefetchInterval(u)}getOptimisticResult(e){let t=this.client.getQueryCache().build(this.client,e);return this.createResult(t,e)}getCurrentResult(){return this.currentResult}trackResult(e){let t={};return Object.keys(e).forEach(s=>{Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(s),e[s])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){let t=this.client.defaultQueryOptions(e),s=this.client.getQueryCache().build(this.client,t);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return null!=e&&e.throwOnError||(t=t.catch(r.ZT)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),r.sk||this.currentResult.isStale||!(0,r.PN)(this.options.staleTime))return;let e=(0,r.Kp)(this.currentResult.dataUpdatedAt,this.options.staleTime);this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},e+1)}computeRefetchInterval(){var e;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!r.sk&&!1!==this.options.enabled&&(0,r.PN)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||n.j.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){let s;let i=this.currentQuery,n=this.options,u=this.currentResult,l=this.currentResultState,a=this.currentResultOptions,p=e!==i,f=p?e.state:this.currentQueryInitialState,y=p?this.currentResult:this.previousQueryResult,{state:v}=e,{dataUpdatedAt:R,error:b,errorUpdatedAt:m,fetchStatus:Q,status:O}=v,g=!1,E=!1;if(t._optimisticResults){let I=this.hasListeners(),C=!I&&h(e,t),S=I&&c(e,i,t,n);(C||S)&&(Q=(0,o.Kw)(e.options.networkMode)?"fetching":"paused",R||(O="loading")),"isRestoring"===t._optimisticResults&&(Q="idle")}if(t.keepPreviousData&&!v.dataUpdatedAt&&null!=y&&y.isSuccess&&"error"!==O)s=y.data,R=y.dataUpdatedAt,O=y.status,g=!0;else if(t.select&&void 0!==v.data){if(u&&v.data===(null==l?void 0:l.data)&&t.select===this.selectFn)s=this.selectResult;else try{this.selectFn=t.select,s=t.select(v.data),s=(0,r.oE)(null==u?void 0:u.data,s,t),this.selectResult=s,this.selectError=null}catch(U){this.selectError=U}}else s=v.data;if(void 0!==t.placeholderData&&void 0===s&&"loading"===O){let T;if(null!=u&&u.isPlaceholderData&&t.placeholderData===(null==a?void 0:a.placeholderData))T=u.data;else if(T="function"==typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&void 0!==T)try{T=t.select(T),this.selectError=null}catch(k){this.selectError=k}void 0!==T&&(O="success",s=(0,r.oE)(null==u?void 0:u.data,T,t),E=!0)}this.selectError&&(b=this.selectError,s=this.selectResult,m=Date.now(),O="error");let F="fetching"===Q,q="loading"===O,w="error"===O,x={status:O,fetchStatus:Q,isLoading:q,isSuccess:"success"===O,isError:w,isInitialLoading:q&&F,data:s,dataUpdatedAt:R,error:b,errorUpdatedAt:m,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>f.dataUpdateCount||v.errorUpdateCount>f.errorUpdateCount,isFetching:F,isRefetching:F&&!q,isLoadingError:w&&0===v.dataUpdatedAt,isPaused:"paused"===Q,isPlaceholderData:E,isPreviousData:g,isRefetchError:w&&0!==v.dataUpdatedAt,isStale:d(e,t),refetch:this.refetch,remove:this.remove};return x}updateResult(e){let t=this.currentResult,s=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,(0,r.VS)(s,t))return;this.currentResult=s;let i={cache:!0};(null==e?void 0:e.listeners)!==!1&&(()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options;if("all"===e||!e&&!this.trackedProps.size)return!0;let s=new Set(null!=e?e:this.trackedProps);return this.options.useErrorBoundary&&s.add("error"),Object.keys(this.currentResult).some(e=>{let r=this.currentResult[e]!==t[e];return r&&s.has(e)})})()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){let e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;let t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){let t={};"success"===e.type?t.onSuccess=!e.manual:"error"!==e.type||(0,o.DV)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){i.V.batch(()=>{var t,s,r,i,n,u,o,l;e.onSuccess?(null==(t=(s=this.options).onSuccess)||t.call(s,this.currentResult.data),null==(r=(i=this.options).onSettled)||r.call(i,this.currentResult.data,null)):e.onError&&(null==(n=(u=this.options).onError)||n.call(u,this.currentResult.error),null==(o=(l=this.options).onSettled)||o.call(l,void 0,this.currentResult.error)),e.listeners&&this.listeners.forEach(e=>{e(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function h(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)||e.state.dataUpdatedAt>0&&a(e,t,t.refetchOnMount)}function a(e,t,s){if(!1!==t.enabled){let r="function"==typeof s?s(e):s;return"always"===r||!1!==r&&d(e,t)}return!1}function c(e,t,s,r){return!1!==s.enabled&&(e!==t||!1===r.enabled)&&(!s.suspense||"error"!==e.state.status)&&d(e,s)}function d(e,t){return e.isStaleByTime(t.staleTime)}},1784:function(e,t,s){let r;s.d(t,{_:function(){return u}});var i=s(7294);let n=i.createContext((r=!1,{clearReset(){r=!1},reset(){r=!0},isReset:()=>r})),u=()=>i.useContext(n)},1670:function(e,t,s){s.d(t,{JN:function(){return u},KJ:function(){return o},pf:function(){return n}});var r=s(7294),i=s(4798);let n=(e,t)=>{(e.suspense||e.useErrorBoundary)&&!t.isReset()&&(e.retryOnMount=!1)},u=e=>{r.useEffect(()=>{e.clearReset()},[e])},o=({result:e,errorResetBoundary:t,useErrorBoundary:s,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&(0,i.L)(s,[e.error,r])},7122:function(e,t,s){s.d(t,{S:function(){return n}});var r=s(7294);let i=r.createContext(!1),n=()=>r.useContext(i);i.Provider},7669:function(e,t,s){s.d(t,{h:function(){return f}});var r=s(7294),i=s(464),n=s(2161),u=s(81),o=s(2924),l=s(3989);class h extends l.l{constructor(e,t){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},t&&this.setQueries(t)}onSubscribe(){1===this.listeners.length&&this.observers.forEach(e=>{e.subscribe(t=>{this.onUpdate(e,t)})})}onUnsubscribe(){this.listeners.length||this.destroy()}destroy(){this.listeners=[],this.observers.forEach(e=>{e.destroy()})}setQueries(e,t){this.queries=e,u.V.batch(()=>{let e=this.observers,s=this.findMatchingObservers(this.queries);s.forEach(e=>e.observer.setOptions(e.defaultedQueryOptions,t));let r=s.map(e=>e.observer),i=Object.fromEntries(r.map(e=>[e.options.queryHash,e])),u=r.map(e=>e.getCurrentResult()),o=r.some((t,s)=>t!==e[s]);(e.length!==r.length||o)&&(this.observers=r,this.observersMap=i,this.result=u,this.hasListeners()&&((0,n.e5)(e,r).forEach(e=>{e.destroy()}),(0,n.e5)(r,e).forEach(e=>{e.subscribe(t=>{this.onUpdate(e,t)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(e=>e.getCurrentQuery())}getOptimisticResult(e){return this.findMatchingObservers(e).map(e=>e.observer.getOptimisticResult(e.defaultedQueryOptions))}findMatchingObservers(e){let t=this.observers,s=e.map(e=>this.client.defaultQueryOptions(e)),r=s.flatMap(e=>{let s=t.find(t=>t.options.queryHash===e.queryHash);return null!=s?[{defaultedQueryOptions:e,observer:s}]:[]}),i=r.map(e=>e.defaultedQueryOptions.queryHash),n=s.filter(e=>!i.includes(e.queryHash)),u=t.filter(e=>!r.some(t=>t.observer===e)),l=e=>{let t=this.client.defaultQueryOptions(e),s=this.observersMap[t.queryHash];return null!=s?s:new o.z(this.client,t)},h=n.map((e,t)=>{if(e.keepPreviousData){let s=u[t];if(void 0!==s)return{defaultedQueryOptions:e,observer:s}}return{defaultedQueryOptions:e,observer:l(e)}}),a=(e,t)=>s.indexOf(e.defaultedQueryOptions)-s.indexOf(t.defaultedQueryOptions);return r.concat(h).sort(a)}onUpdate(e,t){let s=this.observers.indexOf(e);-1!==s&&(this.result=(0,n.Rc)(this.result,s,t),this.notify())}notify(){u.V.batch(()=>{this.listeners.forEach(e=>{e(this.result)})})}}var a=s(5945),c=s(7122),d=s(1784),p=s(1670);function f({queries:e,context:t}){let s=(0,a.NL)({context:t}),n=(0,c.S)(),o=r.useMemo(()=>e.map(e=>{let t=s.defaultQueryOptions(e);return t._optimisticResults=n?"isRestoring":"optimistic",t}),[e,s,n]),[l]=r.useState(()=>new h(s,o)),f=l.getOptimisticResult(o);(0,i.$)(r.useCallback(e=>n?()=>void 0:l.subscribe(u.V.batchCalls(e)),[l,n]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),r.useEffect(()=>{l.setQueries(o,{listeners:!1})},[o,l]);let y=(0,d._)();o.forEach(e=>{(0,p.pf)(e,y)}),(0,p.JN)(y);let v=f.find((e,t)=>{var s,r;return(0,p.KJ)({result:e,errorResetBoundary:y,useErrorBoundary:null!=(s=null==(r=o[t])?void 0:r.useErrorBoundary)&&s,query:l.getQueries()[t]})});if(null!=v&&v.error)throw v.error;return f}}}]);